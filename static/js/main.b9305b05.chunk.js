(this["webpackJsonpset-solver"]=this["webpackJsonpset-solver"]||[]).push([[0],{136:function(e,t){},138:function(e,t){},148:function(e,t){},150:function(e,t){},175:function(e,t){},176:function(e,t){},181:function(e,t){},183:function(e,t){},190:function(e,t){},209:function(e,t){},235:function(e,t,n){"use strict";n.r(t);var a,i,o,r,s,h,u,c=n(2),d=n.n(c),l=n(122),f=n.n(l),v=n(18),p=n(0),g=n.n(p),m=n(37),b=n(25),w=n(26),O=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},j=function(e,t){return new g.a.Point(e.x-t.x,e.y-t.y)},y=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(b.a)(this,e),this.shapeType=void 0,this.shapes=void 0,this.shapeType=t,this.shapes=n}return Object(w.a)(e,[{key:"shapeCount",value:function(){return this.shapes.length}},{key:"mid",value:function(){var e,t,n,a=new g.a.Point(0,0),i=Object(m.a)(this.shapes);try{for(i.s();!(e=i.n()).done;){var o=e.value;t=a,n=o.minRect.center,a=new g.a.Point(t.x+n.x,t.y+n.y)}}catch(r){i.e(r)}finally{i.f()}return a=function(e,t){var n=e.x,a=e.y;return new g.a.Point(n*t,a*t)}(a,1/this.shapes.length)}}]),e}(),x=n(38),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;Object(b.a)(this,e),this.shape=void 0,this.colour=void 0,this.shading=void 0,this.shape=t,this.colour=n,this.shading=a}return Object(w.a)(e,[{key:"setShapeType",value:function(e){this.shape=e<.666?"DIAMOND":e<.81?"SQUIGGLE":"OVAL"}},{key:"setShapeColour",value:function(e){var t=e[0];this.colour=t>=340||t<=15?"RED":t>=240&&t<=300?"PURPLE":t>=60&&t<=180?"GREEN":"PURPLE"}},{key:"setShapeShading",value:function(e,t){var n=t[2]-e[2];this.shading=n<=4?"OPEN":n<21?"STRIPED":"SOLID"}},{key:"equals",value:function(e){return this.colour===e.colour&&this.shading===e.shading&&this.shape===e.shape}},{key:"toString",value:function(){return"".concat(this.colour," ").concat(this.shading," ").concat(this.shape)}}]),e}(),C=function(e,t){for(var n=e.data32S.length,a=new g.a.Mat(n/2,2,g.a.CV_32S),i=S(e,0),o=S(e,2),r=S(e,4),s=6;s<n+6;s+=2){var h=E(i,r);if(0!==h[0]||0!==h[1]){var u=R(h);a.data32S[s%n]=Math.floor(o[0]+t*u[0]),a.data32S[(s+1)%n]=Math.floor(o[1]+t*u[1])}i=o,o=r,r=S(e,s%n)}return a},S=function(e,t){return[e.data32S[t],e.data32S[t+1]]},R=function(e){var t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));return[e[1]/t,-e[0]/t]},E=function(e,t){return[t[0]-e[0],t[1]-e[1]]},I=n(123),T=n.n(I),k=[255,255,255,255],L=[0,0,0,255],_=[[255,0,255,255],[255,0,0,255],[0,255,0,255],[0,0,255,255],[255,128,0,255],[0,255,255,255]],z=function(e){return T.a.rgb.hsl(Object(x.unsafeCoerce)(e))},A=function(){function e(t,n,a){Object(b.a)(this,e),this.shapeType=void 0,this.minRect=void 0,this.minLength=void 0,this.contour=void 0,this.childContour=void 0,this.parentContour=void 0,this.invalid=void 0,this.meanContour=void 0,this.meanInside=void 0,this.meanOutside=void 0,this.extent=void 0;var i=n.size,o=i.width,r=i.height,s=Math.min(o,r);this.minRect=n,this.minLength=Math.min(n.size.width,n.size.height),this.contour=t,this.childContour=C(t,-.1*s),this.parentContour=C(t,.2*s),this.shapeType=new M,this.invalid=!1,this.extent=a}return Object(w.a)(e,[{key:"setShape",value:function(){this.meanContour&&this.meanInside&&this.meanOutside&&(this.shapeType.setShapeType(this.extent),this.shapeType.setShapeColour(z(this.meanContour)),this.shapeType.setShapeShading(z(this.meanInside),z(this.meanOutside)))}},{key:"validateBounds",value:function(e){var t=e.size(),n=t.width,a=t.height,i=g.a.boundingRect(this.parentContour);this.invalid=i.x<0||i.x+i.width>=n||i.y<0||i.y+i.height>=a}},{key:"calculateMeans",value:function(e){var t=new g.a.MatVector;t.push_back(this.childContour),t.push_back(this.contour),t.push_back(this.parentContour);var n=g.a.boundingRect(this.parentContour),a=new g.a.Point(-n.x,-n.y),i=e.roi(n),o=i.size(),r=g.a.Mat.zeros(o.height,o.width,g.a.CV_8U);g.a.drawContours(r,t,0,k,-1,g.a.LINE_8,new g.a.Mat,0,a),this.meanInside=g.a.mean(i,r),g.a.drawContours(r,t,1,k,-1,g.a.LINE_8,new g.a.Mat,0,a),g.a.drawContours(r,t,0,L,-1,g.a.LINE_8,new g.a.Mat,0,a),this.meanContour=g.a.mean(i,r),g.a.drawContours(r,t,2,k,-1,g.a.LINE_8,new g.a.Mat,0,a),g.a.drawContours(r,t,1,L,-1,g.a.LINE_8,new g.a.Mat,0,a),this.meanOutside=g.a.mean(i,r),i.delete(),r.delete(),t.delete();var s=z(this.meanInside),h=z(this.meanOutside);this.invalid=s[2]-h[2]>10}},{key:"adjustWhiteBalance",value:function(e){var t=Object(v.a)(e,3),n=t[0],a=t[1],i=t[2];this.meanContour&&(this.meanContour[0]-=n,this.meanContour[1]-=a,this.meanContour[2]-=i)}}]),e}(),P=function(e){var t=function(e){var t=new g.a.Mat,n=new g.a.Mat;return g.a.GaussianBlur(e,t,new g.a.Size(5,5),g.a.BORDER_DEFAULT),g.a.cvtColor(t,n,g.a.COLOR_BGR2GRAY),t.delete(),n}(e),n=function(e){var t=new g.a.Mat,n=new g.a.MatVector,a=new g.a.Mat;return g.a.adaptiveThreshold(e,t,255,g.a.ADAPTIVE_THRESH_GAUSSIAN_C,g.a.THRESH_BINARY,7,2),g.a.findContours(t,n,a,g.a.RETR_TREE,g.a.CHAIN_APPROX_SIMPLE),t.delete(),a.delete(),n}(t),a=N(n,e),i=D(a);return t.delete(),n.delete(),i},N=function(e,t){for(var n=t.size(),a=Math.min(n.width,n.height),i=.04*a,o=.03*a,r=.025*a,s=.19*a,h=[],u=Object(x.unsafeCoerce)(e.size()),c=0;c<u;c++){var d=e.get(c);if(!(d.data32S.length<i)){var l=g.a.boundingRect(d);if(!(l.width<o&&l.height<o)){var f=g.a.minAreaRect(d),v=f.size,p=v.width,m=v.height;if(!(p<r||m<r)&&!(p>s&&m>s)&&B(p,m)){var b=g.a.contourArea(d)/(p*m);if(!(b<.55)&&!(b>.9)){var w=new A(d,f,b);w.validateBounds(t),w.invalid||w.calculateMeans(t),w.invalid||h.push(w)}}}}}var O=U(h);return h.forEach((function(e){e.adjustWhiteBalance(O),e.setShape()})),h},U=function(e){var t=e.reduce((function(e,t){var n,a,i,o,r,s,h=Object(v.a)(e,3),u=h[0],c=h[1],d=h[2];return[u+(null!==(n=null===(a=t.meanOutside)||void 0===a?void 0:a[0])&&void 0!==n?n:0),c+(null!==(i=null===(o=t.meanOutside)||void 0===o?void 0:o[1])&&void 0!==i?i:0),d+(null!==(r=null===(s=t.meanOutside)||void 0===s?void 0:s[2])&&void 0!==r?r:0)]}),[0,0,0]),n=Object(v.a)(t,3),a=n[0],i=n[1],o=n[2],r=a/e.length,s=i/e.length,h=o/e.length,u=(r+s+h)/3;return[r-u,s-u,h-u]},B=function(e,t){var n=e>t?e/t:t/e;return n>1.3&&n<3.2},D=function(e){return e.filter((function(t){return e.every((function(e){if(t===e)return!0;var n=t.contour.data32S[0],a=t.contour.data32S[1];return!(g.a.pointPolygonTest(e.contour,new g.a.Point(n,a),!1)>0)}))}))},G=function(e,t,n){var a,i=Object(m.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.shapes.includes(t))return void o.shapes.push(n);if(o.shapes.includes(n))return void o.shapes.push(t)}}catch(r){i.e(r)}finally{i.f()}e.push(new y(t.shapeType,[t,n]))},V=function(e){return function(e){for(var t,n,a=[],i=[],o=0;o<e.length;o++){for(var r=e[o],s=a.includes(r),h=o+1;h<e.length;h++){var u=e[h];if(u.shapeType.equals(r.shapeType)){var c=(t=r.minRect.center,n=u.minRect.center,Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));Math.sqrt(c)<1.75*Math.max(r.minLength,u.minLength)&&(a.push(u),G(i,r,u),s=!0)}}s||i.push(new y(r.shapeType,[r]))}return i}(P(e))},q=function(e){var t=new Set,n=new Set,a=new Set,i=new Set;return e.forEach((function(e){t.add(e.shapeType.colour),n.add(e.shapeType.shape),a.add(e.shapeType.shading),i.add(e.shapeCount())})),t.size%2===1&&n.size%2===1&&a.size%2===1&&i.size%2===1},H=function(e,t,n,a,i){var o=e.mid(),r=t.mid();g.a.circle(n,o,2*i,a,-1,g.a.LINE_AA),g.a.circle(n,r,2*i,a,-1,g.a.LINE_AA),g.a.line(n,o,r,a,i,g.a.LINE_AA)},J=n(12),W=n(13),Y=W.a.div(a||(a=Object(J.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),F=W.a.img(i||(i=Object(J.a)(["\n  display: none;\n"]))),Q=W.a.canvas(o||(o=Object(J.a)(["\n  border-radius 10px;\n  max-width: calc(100% - 24px);\n  max-height: calc(100% - 24px);\n"]))),X=n(7),K=function(e){var t=e.imageUrl,n=Object(c.useRef)(null),a=Object(c.useRef)(null);return Object(X.jsxs)(Y,{children:[Object(X.jsx)(F,{src:t,onLoad:function(e){if(a.current&&n.current){var t=function(e){var t=e.size(),n=t.width,a=t.height,i=Math.floor(Math.max(n,a)/1e3),o=new g.a.Mat;return i>1?(g.a.resize(e,o,new g.a.Size(Math.floor(n/i),Math.floor(a/i))),e.delete(),o):e}(g.a.imread(a.current));(function(e){for(var t=[],n=0;n<=e.length-3;n++)for(var a=n+1;a<=e.length-2;a++)for(var i=a+1;i<=e.length-1;i++)q([e[n],e[a],e[i]])&&t.push([e[n],e[a],e[i]]);return t})(V(t)).forEach((function(e,n){!function(e,t,n){var a=t[0].mid(),i=t[1].mid(),o=t[2].mid(),r=O(j(a,i)),s=O(j(i,o)),h=O(j(o,a));r<s?(H(t[0],t[1],e,n,3),s<h?H(t[1],t[2],e,n,3):H(t[2],t[0],e,n,3)):(H(t[1],t[2],e,n,3),r<h?H(t[0],t[1],e,n,3):H(t[2],t[0],e,n,3))}(t,e,_[n])})),g.a.imshow(n.current,t)}},ref:a,alt:"Original Image"}),Object(X.jsx)(Q,{ref:n})]})},Z=W.a.div(r||(r=Object(J.a)([""]))),$=W.a.button(s||(s=Object(J.a)(["\n  background-image: linear-gradient(\n    to right,\n    #ff512f 0%,\n    #f09819 51%,\n    #ff512f 100%\n  );\n  padding: 15px 45px;\n  text-align: center;\n  text-transform: uppercase;\n  transition: 0.5s;\n  background-size: 200% auto;\n  color: white;\n  box-shadow: 0 0 20px #eee;\n  border-radius: 10px;\n  display: block;\n  font-size: 16px;\n  border: 0;\n\n  &:hover {\n    background-position: right center;\n    text-decoration: none;\n    box-shadow: 0 0 0px #eee;\n  }\n"]))),ee=W.a.input(h||(h=Object(J.a)(["\n  display: none;\n"]))),te=function(e){var t=e.onUpload,n=Object(c.useRef)(null),a=Object(c.useCallback)((function(e){var n,a=null!==(n=e.target.files)&&void 0!==n?n:[];a.length>0&&t(URL.createObjectURL(a[0]))}),[t]);return Object(X.jsxs)(Z,{children:[Object(X.jsx)(ee,{ref:n,id:"file",type:"file",accept:"image/*",onChange:a}),Object(X.jsx)($,{onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.click()},children:"Upload Image"})]})},ne=W.a.div(u||(u=Object(J.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100vw;\n  align-items: center;\n  justify-content: center;\n  background: #f3f3f3;\n"]))),ae=function(){var e=Object(c.useState)(),t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(X.jsxs)(ne,{children:[Object(X.jsx)(te,{onUpload:function(e){return a(e)}}),n&&Object(X.jsx)(K,{imageUrl:n})]})};f.a.render(Object(X.jsx)(d.a.StrictMode,{children:Object(X.jsx)(ae,{})}),document.getElementById("root"))}},[[235,1,2]]]);
//# sourceMappingURL=main.b9305b05.chunk.js.map